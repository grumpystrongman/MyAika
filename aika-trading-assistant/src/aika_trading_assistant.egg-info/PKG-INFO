Metadata-Version: 2.4Name: aika-trading-assistantVersion: 0.1.0Summary: Production-oriented Aika Trading Assistant backend, worker, and tooling.Author: AikaLicense: ProprietaryRequires-Python: >=3.10Description-Content-Type: text/markdownRequires-Dist: fastapi>=0.110.0Requires-Dist: uvicorn>=0.27.0Requires-Dist: httpx>=0.26.0Requires-Dist: pydantic>=2.6.0Requires-Dist: pydantic-settings>=2.2.0Requires-Dist: sqlalchemy>=2.0.0Requires-Dist: psycopg[binary]>=3.1.18Requires-Dist: asyncpg>=0.29.0Requires-Dist: alembic>=1.13.1Requires-Dist: cryptography>=42.0.0Requires-Dist: tenacity>=8.2.3Requires-Dist: celery>=5.3.6Requires-Dist: redis>=5.0.0Requires-Dist: qdrant-client>=1.7.0Requires-Dist: python-dotenv>=1.0.1Requires-Dist: orjson>=3.9.15Provides-Extra: devRequires-Dist: pytest>=8.0.0; extra == "dev"Requires-Dist: pytest-asyncio>=0.23.5; extra == "dev"Requires-Dist: respx>=0.21.0; extra == "dev"Requires-Dist: ruff>=0.3.0; extra == "dev"Requires-Dist: mypy>=1.8.0; extra == "dev"# Aika Trading Assistant (Monorepo)Production-oriented trading assistant stack with a FastAPI backend, Celery worker, optional Node streamer, Postgres state, and Qdrant vector storage.## Structure- `src/aika_trading/api` FastAPI service- `src/aika_trading/worker` Celery worker- `services/streamer` Optional Node.js WebSocket/webhook service- `docker-compose.yml` Postgres + Redis + Qdrant## Local development1) Copy env file```cp .env.example .env```2) Start dependencies```docker compose up -d```3) Install Python deps```python -m venv .venv. .venv/bin/activate  # Windows: .venv\Scripts\activatepip install -e .[dev]```4) Run API```uvicorn aika_trading.api.main:app --host 0.0.0.0 --port 8088 --reload```5) Run worker```celery -A aika_trading.worker.app.celery_app worker --loglevel=INFO```6) Optional Node streamer```cd services/streamernpm installnpm run dev```## OAuth examples### Python: build authorize URL (Coinbase)```pythonfrom sqlalchemy.orm import Sessionfrom aika_trading.oauth.state import create_statefrom aika_trading.oauth.coinbase import coinbase_oauthfrom aika_trading.config import settingswith Session(...) as db:    state = create_state(db, "coinbase", settings.coinbase_redirect_uri)    url = coinbase_oauth.build_authorize_url(        client_id=settings.coinbase_client_id,        redirect_uri=settings.coinbase_redirect_uri,        scopes=settings.coinbase_scopes,        state=state["state"],        code_challenge=state["code_challenge"],    )```### Node: sample OAuth callback handler (Express)```jsapp.get("/oauth/coinbase/callback", async (req, res) => {  const { code, state } = req.query;  // POST to token endpoint with code_verifier stored server-side  res.json({ ok: true });});```## WebSocket example (Node)See `services/streamer/index.js` for a Coinbase Advanced Trade WebSocket subscription example.## Background consumer example (Python)```pythonfrom aika_trading.worker.tasks import ingest_knowledgeingest_knowledge.delay({"items": [{"id": "doc-1"}]})```## Trade execution pseudocode```client submits trade proposal-> policy engine evaluates risk-> if approval required: create approval + audit-> human approves via /approvals-> execute_trade checks approval + idempotency-> connector.place_order-> audit trail persisted```## Notes- All tokens are encrypted at rest using `TOKEN_ENCRYPTION_KEY`.- All trade actions are deny-by-default and require approval by default.- Robinhood connector is read-only and marked unsupported.## Tests```pytest -q```## Security expectations- Use strict redirect URIs and rotate keys regularly.- Never log secrets or tokens.- Keep human approval required for any trade or transfer.